<?xml version="1.0" encoding="UTF-8"?>
<ui:decorate xmlns="http://www.w3.org/1999/xhtml"
             xmlns:h="http://xmlns.jcp.org/jsf/html"
             xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
             template="/templates/docsBar.xhtml"
             xmlns:p="http://primefaces.org/ui"
             xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:outputStylesheet name="sheet/createSheet.css"></h:outputStylesheet>

    <h:body>
        <div class="container">
            <div class="jcc">
                <h2>Entrar em uma mesa</h2>
            </div>
            <div class="card">
                <p:tooltip/>

                <h:form id="formNewBoard">
                    <p:messages id="messages" closable="true">
                        <p:autoUpdate/>
                    </p:messages>


                    <div class="r mt-2">
                        <div class="p-field col-6 p-md-4">
                            <p:outputLabel value="Código da mesa" for="boardCode" />
                            <p:inputText 
                                id="boardCode" 
                                value="#{enterTableController.code}" 
                                required="true" 
                                requiredMessage="Insira código da nova mesa"
                                />
                        </div>
                        <div class="p-field col-6 p-md-4">
                            <p:outputLabel value="Personagem para mesa" for="boardSheet" />
                            <p:selectOneMenu 
                                value="#{enterTableController.sheetId}" 
                                id="boardSheet" required="true" 
                                requiredMessage="Escolha o personagem">
                                <f:selectItem itemLabel="Escolha o personagem" noSelectionOption="true"/>
                                <f:selectItems value="#{enterTableController.freeSheets}" var="sheet" itemLabel="#{sheet.name}" itemValue="#{sheet.id}" />
                            </p:selectOneMenu>
                        </div>
                    </div>

                    <div class="r mt-2">
                        <div class="jcc">
                            <p:commandButton 
                                icon="pi pi-check" 
                                value="Salvar"
                                action="#{enterTableController.save()}" 
                                title="Salvar"
                                update="@all"
                                >
                            </p:commandButton>
                        </div>
                    </div>

                </h:form>
            </div>
            <p:dialog id="enterTableSuccess" widgetVar="enterTableSuccess">
                <h3>Você conseguiu se cadastrar na mesa!</h3>
                <p:commandButton value="Ver minhas mesas" action="/boards/index.xhtml?faces-redirect=true" class="custom"></p:commandButton>
            </p:dialog>
            <p:dialog id="enterTableError" widgetVar="enterTableError">
                <h3>Ocorreu um erro ao se cadastrar na mesa, verifique o código de acesso</h3>
                <p:commandButton value="Ver minhas mesas" action="/boards/index.xhtml?faces-redirect=true" class="custom"></p:commandButton>
            </p:dialog>
        </div>
    </h:body>

</ui:decorate>